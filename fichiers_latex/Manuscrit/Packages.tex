% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% %                            PAQUETS USUELS                              %
% %                                                   %
% % How to install most of them:
% %   tlmgr install texlive-latex-extra
% % Complementary need package from texlive-2019:
% %   mathpazo courier palatino collectbox ucs
% %   adjustbox normalem ulem enumitem esvect SIstyle SIunits
% %   fundus-calligra pgf-blur animate media9 ocgx2 blindtext symbol
% %   quotchap lettrine minifp minitoc wrapfig multirow diagbox
% %   pict2e makecell placeins helvetic avantgar bbm-macros
% %   tikzsymbols algorithm2e ifoddpage relsize appendixnumberbeamer
% %   calligra
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{mathptmx}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
%\usepackage[francais]{babel}
\usepackage[french]{babel}  % francais = french babel
\usepackage{meta-donnees} % page de garde
\usepackage{meta-donnees2} %page de 4ième de couv
\usepackage{amssymb}
\usepackage{verbatim}
\usepackage{array}
\usepackage{color}
\usepackage{xfrac}
\usepackage{enumitem}
\usepackage{esvect}
\usepackage[squaren,Gray]{SIunits}
\usepackage{sistyle}
\usepackage{eurosym}  %pour obtenir le symbole Euro
%\usepackage{gensymb} %pour obtenir le symbole \degree
\usepackage{calligra}
\usepackage{tikz}
\usetikzlibrary{positioning,backgrounds,fadings,shadows.blur,shadows}
\usetikzlibrary{fit,shapes.misc,shapes}

%\usepackage{animate}
\usepackage{blindtext}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%                   Notations personnalisées                    %%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% \newcommand{\bigO}{\mathcal{O}} % BigO notation
\newcommand{\bigO}{\operatorname{O}} % BigO notation
% \newcommand{\bigO}{O} % BigO notation


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%           Packages pour les entetes et pied de page           %%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\usepackage{picins}
\usepackage{fancyhdr}
%\usepackage{psboxit}  %%% A Inserer avant babel !!!! 
\usepackage{pifont}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%                   Packages et couleurs perso                  %%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{xcolor}  %%% Incompatibilité avec \usepackage{colortbl} ??????
\definecolor{BleuCyan}{RGB}{0,190,190}  %%% Définition d'une couleur personnelle
\definecolor{RoseRose}{RGB}{238,44,44}
\definecolor{VertVert}{RGB}{10,255,118}
\definecolor{Anthracite}{RGB}{91,124,151}
\definecolor{GrisPasTropClair}{RGB}{83,135,135}
\definecolor{BleuPetrole}{RGB}{0, 0 ,205}
\definecolor{BleuClair}{RGB}{234, 255 ,255}
\definecolor{Bleu1}{RGB}{26, 64 ,145}
\definecolor{Rouge1}{RGB}{215, 19 ,24}
\definecolor{myblue}{rgb}{.8, .8, 1}
\definecolor{violet1}{rgb}{0.78,0.53,0.97}
\definecolor{myblue2}{rgb}{0,0.41,0.54} % dark blue
\definecolor{myred}{RGB}{192,0,0} % dark red
\definecolor{mygreen2}{RGB}{0,120,0} % dark green
\definecolor{myblue3}{HTML}{1a4091} % dark blue 	
\definecolor{couleurmarie}{RGB}{0,102,204} % dark green
\definecolor{couleurpierre}{RGB}{6,69,173} % dark green

%\newcommand*\maboite[1]{%
%\fcolorbox{GrisPasTropClair}{BleuClair}{\hspace{1em}#1\hspace{1em}}}
%\newcommand{\parttoccolor}{blue}
%\newcommand{\chaptertoccolor}{red}
%\newcommand{\sectiontoccolor}{green!70!black}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%            Packages pour les captions optimisés               %%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[font=small,font={it}]{caption} % \usepackage[small,hang]{caption2} apparement cpation2 est obsolette
%\captionsetup[table]{position=bottom}
%\renewcommand{\captionfont}{\it \small}
%\renewcommand{\captionlabelfont}{\it \bf \small}
% \renewcommand{\captionlabeldelim}{ :}  % Ne marche qu'avec caption2



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%           Packages pour les titres de chapitres               %%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\usepackage[Bjornstrup]{fncychap}
\usepackage[avantgarde]{quotchap}

\usepackage{lettrine}    %Lettrine exemple: \lettrine[lines=2]{L}{orem ipsum}
\usepackage[francais]{minitoc}		% Pour ajouter une table des matières à chaque chapitre
\setcounter{minitocdepth}{2}

% \usepackage{hyphenat}
% \DeclareCaptionTextFormat{new}{\nohyphens{#1}}
% \usepackage{titlesec}
% \titleformat{\section}[<shape>]{<format>}{<label>}{<sep>}{<before-code>}[<after-code>]
% \titleformat{\section}{}{}{}{\begin{raggedright}}[\end{raggedright}]

% \renewcommand{\@seccntformat}[1]{\raggedright#1}
% \renewcommand{\arabic{section}-}
% \sectionfont{\raggedright\large\sffamily\bfseries}
% \titleformat{\section}{\raggedright\large\sffamily\bf}{\thesection}{1em}{}

%https://tex.stackexchange.com/questions/35686/avoid-hyphenation-in-chapter-title
% \usepackage{etoolbox}% http://ctan.org/pkg/etoolbox
% \patchcmd{\@maketitle}{#1}{\hyphenpenalty=10000 #1}{}{}% Patch \title
% \begin{raggedright}
% \end{raggedright}
% \patchcmd{\@Soustitre}{#1}{\hyphenpenalty=10000 #1}{}{}% Patch \ThesisSubTitle
% \patchcmd{\@ThesisSubTitle}{#1}{\hyphenpenalty=10000 #1}{}{}% Patch \ThesisSubTitle
% \patchcmd{\@makechapterhead}{#1}{\hyphenpenalty=10000 #1}{}{}% Patch \chapter
% \patchcmd{\@makeschapterhead}{#1}{\hyphenpenalty=10000 #1}{}{}% Patch \chapter*
% \makeatother

% https://tex.stackexchange.com/questions/184280/section-headings-with-long-titles
\pretolerance=10000

% \usepackage{etoolbox}
% \apptocmd{\sloppy}{\hbadness 10000\relax}{}{}

% Alternatively (and without possible adverse affects), you could typeset the bibliography \raggedright:
% \usepackage{etoolbox}
% \apptocmd{\sloppy}{\hbadness 10000\relax}{}{}
% \apptocmd{\thebibliography}{\raggedright}{}{}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%                Packages pour les figures                      %%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{epsfig}
\usepackage{wrapfig}  %%% Inserer du texte a droite ou à gauche de l'image
%\usepackage{picins}  %%% Inserer du texte a droite ou à gauche de l'image
\usepackage{float}
\usepackage{graphicx}
%\usepackage{subfigure}
\usepackage{subcaption}
\usepackage{placeins}
\usepackage{media9}

\usepackage{fancybox}
\usetikzlibrary{arrows.meta, arrows}
\usetikzlibrary{matrix,decorations.pathreplacing}
\usepackage[export]{adjustbox}
\usepackage{pgfplots}
\pgfplotsset{compat=1.15}
% \pgfplotsset{compat=1.3} % also works for me
% \pgfplotsset{compat=1.8} % also works for me`
% \usepackage[edges]{forest}
\usepackage{forest}
\usepackage{ccicons}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%                  Packages pour les tableaux                   %%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{array}
\usepackage{textcomp}
\usepackage{booktabs}
\usepackage{colortbl}  %%% Couleurs de cellule de tableau
\usepackage{longtable}
\usepackage{lscape}    %%% Rotation des tableaux
\usepackage{makecell}
\usepackage{multirow, hhline}
\usepackage{tabularx}
\usepackage{diagbox}  %%% slashbox is supersed by diagbox with backward comp
\usepackage{pifont}
%\usepackage[table]{xcolor}

\usepackage{colortbl}

\arrayrulecolor{myblue3}
\let\oldtabular=\tabular 
\def\tabular{\small\oldtabular}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%                  Packages pour les mathématiquess             %%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{amsmath}
\usepackage{bm}

%\usepackage{empheq} % Pour encadrer les equations

%\usepackage{fourier}
\usepackage{SIunits}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%                  Packages pour la bibliographie               %%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% For use with oldschool bibtex, without biblatex
%\usepackage{biblist}  % pour utiliser plusieurs fichiers bibteX
% \usepackage{natbib}  % is better than \usepackage{cite}

% Bibliography with hyperlink from the HAL field
\usepackage{filecontents}

\begin{filecontents*}{eprint-hal.dbx}
	\ProvidesFile{eprint-hal.dbx}[2018/09/26 HAL/TEL eprints]
	\DeclareDatamodelFields[type=field,datatype=verbatim]{arxiv,hal}
	\DeclareDatamodelEntryfields{hal}
	\DeclareDatamodelFields[type=field,datatype=literal]{arxivclass}
	\DeclareDatamodelEntryfields{arxivclass}
\end{filecontents*}

% \usepackage[style=alphabetic]{biblatex}
% \usepackage[style=numeric,backend=biber]{biblatex}
\usepackage[backend=biber,
			% style=ieee,
			% bibencoding=ascii,
			backref=true,
			style=alphabetic,  % citestyle
			% style=authoryear, % style de citation auteur-année
			% style=reading,
			% style=numeric,
			% sorting=ynt,  % trier par année, nom, titre
			sorting=nyt,  % trier par nom, année, titre
			% maxnames=3,  % nombre d’auteurs au-delà duquel on ajoute « et al. ».
			% minnames=1,  % le nombre d’auteurs à citer si on dépasse le seuil précédent
			maxbibnames=99,  % dans la biblio
			maxcitenames=3,  % dans les citations
			% firstinits=true,  % tous les prénoms et noms intermédiaires sous forme d’initiales
			url=false,
			% eprint=false,
			% isbn=false,
			% doi=false,
			datamodel=eprint-hal,
			]{biblatex}
\addbibresource{../Conclusion/bibliographie.bib}

\DeclareFieldFormat{hal}{%
	\mkbibacro{HAL}\addcolon\space
	\ifhyperref
	{\href{https://hal.archives-ouvertes.fr/#1}{\nolinkurl{#1}}}
	{\nolinkurl{#1}}}

\DeclareFieldAlias{eprint:hal}{hal}
\DeclareFieldAlias{eprint:HAL}{eprint:hal}

\renewbibmacro*{eprint}{%
	\printfield{hal}%
	\newunit\newblock
	\iffieldundef{eprinttype}
	{\printfield{eprint}}
	{\printfield[eprint:\strfield{eprinttype}]{eprint}}}

% Find shitty Unicode
\DeclareUnicodeCharacter{022F}{i}  % ĭ
\DeclareUnicodeCharacter{0306}{g}  % ğ
% bash$ ag '[अ-व]'

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%              Packages pour les liens hypertexte               %%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%  Package pour les liens hypertextes, a mettre après tous les autres packages
% \usepackage[backref=page]{hyperref}  % For use with oldschool bibtex, without biblatex
\usepackage{hyperref}
\hypersetup{
	% backref=true,
	% pagebackref=true,
	colorlinks=true,
	breaklinks=true, % permet le retour  la ligne dans les liens trop longs
	% linkcolor=BleuCyan,
	% linkcolor=couleurmarie,
	linkcolor=couleurpierre,
	urlcolor=blue,
	citecolor=BleuPetrole,
	filecolor=VertVert,
	% hyperindex=true,
	% bookmarks=true, %cre des signets pour Acrobat
	bookmarksopen=true,
	pdftitle={Thèse de Doctorat}, %informations apparaissant dans
	pdfauthor={Pierre Nagorny}, %dans les informations du document
	pdfsubject={Contrôle automatique non-invasif de la Qualité des produits} % sous Acrobat.
}

%\usepackage[backref=page]{hyperref}
%\renewcommand*{\backref}[1]{}
%\renewcommand*{\backrefalt}[4]{%
%	\ifcase #1 (Non cité.)%
%	\or        (Cité page~#2.)%
%	\else      (Cité pages~#2.)%
%	\fi}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%             Packages pour les encarts de mini-conclusions              %%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% from https://tex.stackexchange.com/a/248900
\newcommand{\miniconclusion}[2]{
	\begin{figure}[h]
		\centering
		\begin{tikzpicture}
		\node[anchor=text,text width=\columnwidth-1.2cm, draw, rounded corners, line width=1pt, fill={gray!01}, inner sep=5mm, drop shadow={black!50!white}] (big) {\\#2};
		\node[draw, rounded corners, line width=.5pt, fill=white, anchor=west, xshift=5mm] (small) at (big.north west) {#1};
		\end{tikzpicture}
	\end{figure}
}